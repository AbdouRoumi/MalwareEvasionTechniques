#include "Functions.h"





extern PTEB getTEB(void);
extern DWORD CustomError(void);

int main(void) {

	//We get the TEB here
	info("Getting the TEB ------\n");
	PTEB pTeb = getTEB();
	okay("We got the TEB  0x%p ", pTeb);


	HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, 4);

	if (hProcess == NULL) {
		okay("[Open Process] Failed !! ");
		info("[Custom Error] ERROR : 0x%lx",CustomError());
		info("[GetLastError] ERROR : 0x%lx",GetLastError());
		if (CustomError() == GetLastError()) {
			info("custom error working properly!");
			return EXIT_SUCCESS;
		}
		Warning("values don't match 0x%lx",GetLastError());
		return EXIT_FAILURE;
	}

	return EXIT_SUCCESS;

}